function init() { var e, t, a, s, i, o, d, r, l, n, c = 0, h = 0, p = !1, m = { type: Phaser.AUTO, width: 800, height: 600, physics: { default: "arcade", gravity: { y: 300 }, debug: !1 }, scene: { preload: function () { this.load.audio("despacito", "./assets/audio/playback/despacito.mp3"), this.load.audio("jump", "./assets/audio/misc/jump.wav"), this.load.audio("explode", "./assets/audio/misc/Explosion.mp3"), this.load.audio("collectStar", "./assets/audio/misc/starCollect.mp3"), this.load.image("sky", "./assets/images/sky.png"), this.load.image("platform", "./assets/images/platform.png"), this.load.image("star", "./assets/images/star.png"), this.load.image("bomb", "./assets/images/bomb.png"), this.load.spritesheet("jack", "./assets/images/jack.png", { frameWidth: 32, frameHeight: 48 }) }, create: function () { this.add.image(0, 0, "sky").setOrigin(0, 0), (e = this.physics.add.staticGroup()).create(400, 568, "platform").setScale(2).refreshBody(), e.create(600, 400, "platform"), e.create(50, 250, "platform"), e.create(750, 220, "platform"), e.create(400, 120, "platform").setScale(.3, 1).refreshBody(), (t = this.physics.add.sprite(100, 400, "jack")).setBounce(.2), t.setCollideWorldBounds(!0), t.body.setGravityY(300), (a = this.physics.add.group({ key: "star", repeat: 11, setXY: { x: 12, y: 0, stepX: 70 } })).children.iterate(function (e) { e.setBounceY(Phaser.Math.FloatBetween(.2, .5)), e.body.setGravityY(Math.floor(10 * Math.random() + 1)), e.body.setVelocityY(50) }), (s = this.physics.add.group({ key: "bomb", repeat: 4, setXY: { x: 50, y: 50, stepX: 140 } })).children.iterate(function (e) { e.setBounceY(0), e.body.setGravityY(Math.floor(10 * Math.random() + 1)), e.body.setVelocityY(100) }), n = this.add.text(16, 16, "score: 0", { fontSize: "32px", fill: "white" }), this.anims.create({ key: "left", frames: this.anims.generateFrameNumbers("jack", { start: 0, end: 3 }), frameRate: 10, repeat: -1 }), this.anims.create({ key: "turn", frames: [{ key: "jack", frame: 4 }], frameRate: 20 }), this.anims.create({ key: "right", frames: this.anims.generateFrameNumbers("jack", { start: 5, end: 8 }), frameRate: 10, repeat: -1 }), this.physics.add.collider(t, e), this.physics.add.collider(a, e), this.physics.add.collider(s, e), this.physics.add.overlap(t, a, u, null, this), this.physics.add.collider(t, s, y, null, this), i = this.input.keyboard.createCursorKeys(), (o = this.sound.add("despacito")).volume = .5, o.loop = !0, o.play(), (d = this.sound.add("jump")).volume = .8, (r = this.sound.add("explode")).volume = .8, (l = this.sound.add("collectStar")).volume = 1, $(".loader").fadeOut(500), $("canvas").fadeIn(1e3), $(".title").fadeIn(1e3) }, update: function () { p || (i.left.isDown ? (t.setVelocityX(-100), t.anims.play("left", !0)) : i.right.isDown ? (t.setVelocityX(100), t.anims.play("right", !0)) : (t.setVelocityX(0), t.anims.play("turn")), i.space.isDown && (++c <= 20 && t.setVelocityY(-200), t.body.touching.down && (c = 0, d.play()))) } } }; function y(e, t) { e.setTint(16711680), e.anims.play("turn"), this.physics.pause(), p = !0, o.pause(), r.play(), this.add.text(300, 230, "GAME OVER", { fontSize: "40px", fill: "red" }) } function u(e, t) { if (t.disableBody(!0, !0), l.play(), h += 10, n.setText("Score: " + h), 0 === a.countActive(!0)) { a.children.iterate(function (e) { e.enableBody(!0, e.x, 0, !0, !0) }); var i = e.x < 400 ? Phaser.Math.Between(400, 800) : Phaser.Math.Between(0, 400), o = s.create(i, 16, "bomb"); o.setBounce(1), o.setCollideWorldBounds(!0), o.setVelocity(Phaser.Math.Between(-200, 200), 20) } } new Phaser.Game(m) } $(document).ready(function () { init(), console.clear() });
